version: '3.8'

services:
  api-server:
    build: .
    command: python flask_now_playing.py
    ports:
      - "5001:5001"
    volumes:
      - ./:/app  # Mount entire source for development
    environment:
      - FLASK_ENV=development
      - FLASK_DEBUG=1
      - PYTHONUNBUFFERED=1
    restart: unless-stopped
    networks:
      - tv-scraper-network

  # Development database browser
  sqlite-browser:
    image: coleifer/sqlite-web
    ports:
      - "8080:8080"
    volumes:
      - ./:/data
    command: sqlite_web -H 0.0.0.0 -x /data/tvguide.db
    networks:
      - tv-scraper-network
    profiles:
      - browser

networks:
  tv-scraper-network:
    driver: bridge